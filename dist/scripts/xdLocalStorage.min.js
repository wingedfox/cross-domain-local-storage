"use strict";window.XdUtils=window.XdUtils||function(){function a(a,b){var c,d=b||{};for(c in a)a.hasOwnProperty(c)&&(d[c]=a[c]);return d}return{extend:a}}(),window.xdLocalStorage=window.xdLocalStorage||function(){function a(a){j[a.id]&&(j[a.id](a),delete j[a.id])}function b(b){var c;try{c=JSON.parse(b.data)}catch(d){}c&&c.namespace===g&&("iframe-ready"===c.id?(l=!0,h.initCallback(),m.forEach(function(a){f.contentWindow.postMessage(JSON.stringify(a),"*")}),m.length=0):a(c))}function c(a,b,c,d){i++,j[i]=d;var e={namespace:g,id:i,action:a,key:b,value:c};l?f.contentWindow.postMessage(JSON.stringify(e),"*"):m.push(e)}function d(a){if(k)return void console.log("xdLocalStorage was already initialized!");k=!0,h=XdUtils.extend(a,h);var c=document.createDocumentFragment();window.addEventListener?window.addEventListener("message",b,!1):window.attachEvent("onmessage",b),f=c.ownerDocument.createElement("iframe"),f.id=h.iframeId,f.src=h.iframeUrl,c.appendChild(f),document.body.appendChild(c)}function e(){return k?!0:(console.log("You must call xdLocalStorage.init() before using it."),!1)}var f,g="cross-domain-local-message",h={iframeId:"cross-domain-iframe",iframeUrl:void 0,initCallback:function(){}},i=-1,j={},k=!1,l=!1,m=[];return{init:function(a){if(!a.iframeUrl)throw"You must specify iframeUrl";d(a)},setItem:function(a,b,d){e()&&c("set",a,b,d)},getItem:function(a,b){e()&&c("get",a,null,b)},removeItem:function(a,b){e()&&c("remove",a,null,b)},key:function(a,b){e()&&c("key",a,null,b)},clear:function(a){e()&&c("clear",null,null,a)}}}();